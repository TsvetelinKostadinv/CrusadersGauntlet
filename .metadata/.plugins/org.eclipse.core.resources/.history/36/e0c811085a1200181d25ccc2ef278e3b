package com.crusaders.gauntlet.java.scriptManagementJava;

import java.io.File;
import java.io.FileNotFoundException;

import com.crusaders.gauntlet.java.codeGeneration.ScriptFinder;
import com.crusaders.gauntlet.java.scriptManagementJava.ScriptGeneratorJava;

public class ScriptFinderJava implements ScriptFinder{
	
	public final String directoryPath = ScriptGeneratorJava.directoryPath;
	public final String defaultName = ScriptGeneratorJava.defaultName;
	public final String extentionOfFile = ScriptGeneratorJava.extentionOfFile;
	
	private final File directory = new File(directoryPath);
	
	@Override
	public File findScript(Integer index) throws FileNotFoundException 
	{
		if (directory.isDirectory()) 
		{
			String[] namesOfFiles = directory.list();
			if (namesOfFiles.length != 0) 
			{
				for (int i = 0; i < namesOfFiles.length; i++) 
				{
					String currName = namesOfFiles[i];
					StringBuilder buildingDefaultName = new StringBuilder();
					for (int j = 0; j < defaultName.length(); j++) 
					{
						buildingDefaultName.append(currName.charAt(j));
					}
					if (!buildingDefaultName.toString().equals(defaultName)) 
					{
						continue;
					} else {
						if (currName.charAt(defaultName.length()) == index.toString().charAt(0)) 
						{
							return new File(directoryPath + defaultName + index.toString() + extentionOfFile);
						}
					}
				}
			}
		} else {
			directory.mkdirs();
		}
		throw new FileNotFoundException();
	}
}
